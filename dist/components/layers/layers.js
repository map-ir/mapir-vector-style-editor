import e from"styled-components";import{__makeTemplateObject as n,__read as o}from"../../node_modules/tslib/tslib.es6.js";import t,{useState as r,useRef as i}from"react";import{useAtomValue as l,useAtom as a}from"jotai";import{useIntl as m}from"react-intl";import{titleState as s}from"../../atoms/general.js";import{mapState as c,styleObjState as d,selectedLayerIDState as p}from"../../atoms/map.js";import f from"../../common/geo-icon.js";import u from"../../common/expandable.js";import{Row as g,Icon as y}from"../../common/styles.js";import v from"../editor/zoom-range.js";import h from"./spec-editor.js";import{addNewLayer as j}from"../../common/utils/add-new-layer.js";import x from"../../common/utils/delete-layer.js";import w from"../../hooks/useOutsideClickHandler.js";import{ReactComponent as b}from"../../assets/icons/plus.svg.js";import{ReactComponent as E}from"../../assets/icons/delete.svg.js";import{ReactComponent as C}from"../../assets/icons/point.svg.js";import{ReactComponent as _}from"../../assets/icons/line.svg.js";import{ReactComponent as k}from"../../assets/icons/polygon.svg.js";function I(){var e,n,g=m(),I=l(c),N=l(s),R=o(a(d),2),H=R[0],z=R[1],M=o(a(p),2),O=M[0],W=M[1],D=o(r(!1),2),F=D[0],G=D[1],J=i(null);w(J,G.bind(null,!1));var K=function(e){W((function(n){return n!==e?e:void 0}))},Q=function(e){j(e,z),G(!1)};return t.createElement(B,null,t.createElement(L,null,t.createElement(S,null,N),t.createElement("div",{ref:J},!F&&t.createElement(y,{onClick:function(e){e.stopPropagation(),G(!0)}},t.createElement(b,{color:"var(--light-1)"})),F&&t.createElement(A,null,t.createElement(y,{title:g.formatMessage({id:"point"}),bg:"var(--light-2)",hover:"var(--color-primary-20)",onClick:function(){return Q("point")}},t.createElement(C,{color:"var(--color-primary)"})),t.createElement(y,{title:g.formatMessage({id:"line"}),bg:"var(--light-2)",hover:"var(--color-primary-20)",onClick:function(){return Q("line")}},t.createElement(_,{color:"var(--color-primary)"})),t.createElement(y,{title:g.formatMessage({id:"polygon"}),bg:"var(--light-2)",hover:"var(--color-primary-20)",onClick:function(){return Q("fill")}},t.createElement(k,{color:"var(--color-primary)"}))))),t.createElement(T,null,null===(n=null===(e=null==H?void 0:H.layers)||void 0===e?void 0:e.filter((function(e){var n;return!(null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.endsWith("-text-layer"))})))||void 0===n?void 0:n.map((function(e){var n=e.id,o=e.type,r=O===n;return t.createElement(u,{key:n,open:r,onOpen:K.bind(null,n),HeaderRenderer:function(){return t.createElement(P,null,t.createElement(f,{data:o,color:"var(--color-primary)"}),t.createElement(E,{style:{cursor:"pointer"},color:"var(--shade-3)",onClick:function(){return I&&x(n,I,z)}}))}},t.createElement(q,null,t.createElement(v,null),t.createElement(h,{type:o})))}))))}var N,R,H,z,M,O,W,B=e.div.withConfig({displayName:"layers__Wrapper",componentId:"sc-o4h5cj-0"})(N||(N=n(["\n  width: 100%;\n  max-height: 92%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 1em;\n  box-sizing: border-box;\n"],["\n  width: 100%;\n  max-height: 92%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 1em;\n  box-sizing: border-box;\n"]))),L=e.div.withConfig({displayName:"layers__Header",componentId:"sc-o4h5cj-1"})(R||(R=n(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1em;\n"],["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1em;\n"]))),P=e(L).withConfig({displayName:"layers__ExpandHeader",componentId:"sc-o4h5cj-2"})(H||(H=n([""],[""]))),S=e.h2.withConfig({displayName:"layers__Title",componentId:"sc-o4h5cj-3"})(z||(z=n(["\n  margin: 0;\n"],["\n  margin: 0;\n"]))),T=e.div.withConfig({displayName:"layers__LayersContainer",componentId:"sc-o4h5cj-4"})(M||(M=n(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 1em;\n  overflow: hidden;\n  overflow-y: auto;\n  scrollbar-gutter: stable both-edges;\n"],["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 1em;\n  overflow: hidden;\n  overflow-y: auto;\n  scrollbar-gutter: stable both-edges;\n"]))),q=e(T).withConfig({displayName:"layers__ExpandBody",componentId:"sc-o4h5cj-5"})(O||(O=n(["\n  gap: 0;\n  padding-bottom: 1em;\n"],["\n  gap: 0;\n  padding-bottom: 1em;\n"]))),A=e(g).withConfig({displayName:"layers__StyledRow",componentId:"sc-o4h5cj-6"})(W||(W=n(["\n  padding: 0;\n  gap: 1em;\n"],["\n  padding: 0;\n  gap: 1em;\n"])));export{I as default};
//# sourceMappingURL=layers.js.map
