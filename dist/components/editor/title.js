import{__read as e}from"../../node_modules/tslib/tslib.es6.js";import t,{useState as l,useEffect as n}from"react";import{useIntl as o,FormattedMessage as a}from"react-intl";import{useAtomValue as r,useAtom as m}from"jotai";import i from"../../common/input-number.js";import u from"../../common/color-picker.js";import{Select as c,SelectTrigger as s,SelectValue as d,SelectIcon as v,SelectContent as f,SelectViewport as E,SelectItem as p,SelectItemText as y,SelectItemIndicator as j}from"../../common/select.js";import{Column as x,Row as g,Selector as b,Label as h}from"../../common/styles.js";import w from"../../common/utils/update-style.js";import{mapState as C,selectedLayerIDState as k,styleObjState as z,layerState as _}from"../../atoms/map.js";import{columnsState as M}from"../../atoms/general.js";import{ReactComponent as R}from"../../assets/icons/arrow-down.svg.js";import{ReactComponent as L}from"../../assets/icons/tick.svg.js";import{addNewLayer as V}from"../../common/utils/add-new-layer.js";import q from"../../common/utils/delete-layer.js";var A=function(){var A=o(),B=r(C),D=r(k),F=e(m(z),2),G=F[0],H=F[1],I=r(M),J=r(_),K=e(l(),2),N=K[0],O=K[1],P=e(l(D),2),Q=P[0],S=P[1],T=e(l("#000000"),2),U=T[0],W=T[1],X=e(l(16),2),Y=X[0],Z=X[1],$=e(l("no-value"),2),ee=$[0],te=$[1];return n((function(){D&&"symbol"!==(null==J?void 0:J.type)?S("".concat(D,"-text-layer")):S(D)}),[D,J]),n((function(){var e;B&&Q&&((null==B?void 0:B.getLayer(Q))||V("text",H,Q),O(null===(e=null==G?void 0:G.layers)||void 0===e?void 0:e.find((function(e){return e.id===Q}))))}),[B,Q,G]),n((function(){var e,t,l,n,o,a,r;W(null!==(t=null===(e=null==N?void 0:N.paint)||void 0===e?void 0:e["text-color"])&&void 0!==t?t:"#000000"),Z(null!==(n=null===(l=null==N?void 0:N.layout)||void 0===l?void 0:l["text-size"])&&void 0!==n?n:16),te((null===(o=null==N?void 0:N.layout)||void 0===o?void 0:o["text-field"])?null===(r=null===(a=null==N?void 0:N.layout)||void 0===a?void 0:a["text-field"])||void 0===r?void 0:r[1]:"no-value")}),[N]),t.createElement(x,null,t.createElement(g,null,t.createElement(b,{style:{width:"50%"}},t.createElement(h,null,t.createElement(a,{id:"font-size"})),t.createElement(i,{min:0,max:50,value:Y,onChange:function(e){Q&&B&&w(Q,B,"layout","text-size",e,H)}})),t.createElement(b,{style:{width:"50%"}},t.createElement(h,null,t.createElement(a,{id:"font-color"})),t.createElement(u,{value:U,onChange:function(e){Q&&B&&w(Q,B,"paint","text-color",e.target.value,H)}}))),t.createElement(g,null,t.createElement(b,null,t.createElement(h,null,t.createElement(a,{id:"value_title"})),t.createElement(c,{dir:"fa"===A.locale?"rtl":"ltr",value:ee,onValueChange:function(e){Q&&B&&("no-value"===e?"symbol"!==(null==J?void 0:J.type)?q(Q,B,H):w(Q,B,"layout","text-field","",H):w(Q,B,"layout","text-field",["get",e],H))}},t.createElement(s,{"aria-label":A.formatMessage({id:"value_title"})},t.createElement(d,{placeholder:A.formatMessage({id:"selection"})}),t.createElement(v,null,t.createElement(R,null))),t.createElement(f,null,t.createElement(E,null,t.createElement(p,{value:"no-value"},t.createElement(y,null,t.createElement(a,{id:"no-value"})),t.createElement(j,null,t.createElement(L,null))),null==I?void 0:I.map((function(e){return t.createElement(p,{key:e,value:e},t.createElement(y,null,e),t.createElement(j,null,t.createElement(L,null)))}))))))))};export{A as default};
//# sourceMappingURL=title.js.map
