import{__read as e}from"../../node_modules/tslib/tslib.es6.js";import l,{memo as t,useState as n,useEffect as o,useMemo as r}from"react";import{useIntl as a,FormattedMessage as m}from"react-intl";import{useAtomValue as i,useSetAtom as c}from"jotai";import u from"../../hooks/useGetStyleKey.js";import s from"../../common/utils/update-style.js";import d from"./zoom-base.js";import E from"../../common/input-number.js";import f from"../../common/color-picker.js";import{Select as v,SelectTrigger as p,SelectValue as y,SelectIcon as g,SelectContent as j,SelectViewport as _,SelectItem as b,SelectItemText as k,SelectItemIndicator as C}from"../../common/select.js";import{mapState as h,selectedLayerIDState as z,styleObjState as M,layerState as V}from"../../atoms/map.js";import{columnsState as w}from"../../atoms/general.js";import{Selector as x,Label as K,Column as R,Row as F}from"../../common/styles.js";import{ReactComponent as G}from"../../assets/icons/arrow-down.svg.js";import{ReactComponent as S}from"../../assets/icons/tick.svg.js";var q=["static","dynamic","zoom","conditional"],A=t((function(t){var A,B,D,H,I,J=t.type,L=a(),N=i(h),O=i(z),P=c(M),Q=i(w),T=i(V),U=u(J),W=U.styleKey,X=U.property,Y=e(n(null!==(B=null===(A=null==T?void 0:T.layout)||void 0===A?void 0:A[X])&&void 0!==B?B:1),2),Z=Y[0],$=Y[1],ee=e(n(null!==(H=null===(D=null==T?void 0:T.paint)||void 0===D?void 0:D[X])&&void 0!==H?H:"#C11010"),2),le=ee[0],te=ee[1],ne=e(n(q[0]),2),oe=ne[0],re=ne[1];o((function(){var e,l,t,n;["color","stroke-color"].includes(J)&&te(null!==(l=null===(e=null==T?void 0:T[W])||void 0===e?void 0:e[X])&&void 0!==l?l:"#C11010"),["size","stroke-size"].includes(J)&&$(null!==(n=null===(t=null==T?void 0:T[W])||void 0===t?void 0:t[X])&&void 0!==n?n:1)}),[T,W,X]);var ae=r((function(){return{static:["color","stroke-color"].includes(J)?l.createElement(f,{value:le,onChange:function(e){X&&W&&O&&N&&s(O,N,W,X,e.target.value,P)}}):l.createElement(E,{min:1,max:20,value:Z,onChange:function(e){X&&W&&O&&N&&s(O,N,W,X,e,P)}}),dynamic:l.createElement(x,null,l.createElement(K,null,l.createElement(m,{id:"value_title"})),l.createElement(v,{dir:"fa"===L.locale?"rtl":"ltr",onValueChange:function(e){X&&W&&O&&N&&s(O,N,W,X,["get",e],P)}},l.createElement(p,{"aria-label":L.formatMessage({id:"value_title"})},l.createElement(y,{placeholder:L.formatMessage({id:"selection"})}),l.createElement(g,null,l.createElement(G,null))),l.createElement(j,null,l.createElement(_,null,null==Q?void 0:Q.map((function(e){return l.createElement(b,{key:e,value:e},l.createElement(k,null,e),l.createElement(C,null,l.createElement(S,null)))})))))),zoom:X&&l.createElement(d,{type:J}),conditional:l.createElement(l.Fragment,null)}[oe]}),[oe,Z,Q,X,W,le]);return l.createElement(R,null,l.createElement(F,null,l.createElement(x,null,l.createElement(K,null,l.createElement(m,{id:["color","stroke-color"].includes(J)?"color_base_on":"size_base_on"})),l.createElement(v,{defaultValue:q[0],dir:"fa"===L.locale?"rtl":"ltr",onValueChange:function(e){re(e)}},l.createElement(p,{"aria-label":L.formatMessage({id:["color","stroke-color"].includes(J)?"color_base_on":"size_base_on"})},l.createElement(y,{placeholder:L.formatMessage({id:"selection"})}),l.createElement(g,null,l.createElement(G,null))),l.createElement(j,null,l.createElement(_,null,null===(I=null==q?void 0:q.filter((function(e){return!!Q||!["dynamic","conditional"].includes(e)})))||void 0===I?void 0:I.map((function(e){return l.createElement(b,{key:e,value:e},l.createElement(k,null,l.createElement(m,{id:e})),l.createElement(C,null,l.createElement(S,null)))})))))),"static"===oe&&ae),"static"!==oe&&l.createElement(F,null,ae))}));export{A as default};
//# sourceMappingURL=base-on.js.map
