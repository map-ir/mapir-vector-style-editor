import o from"styled-components";import{__makeTemplateObject as r,__read as n,__assign as e,__values as t}from"../node_modules/tslib/tslib.es6.js";import i,{useRef as l,useEffect as a}from"react";import{getRTLTextPluginStatus as s,setRTLTextPlugin as d,Map as u}from"mapbox-gl";import{useAtom as c,useAtomValue as m}from"jotai";import{mapState as p,isMapLoadedState as f,mapPropsState as v,styleObjState as h}from"../atoms/map.js";import"mapbox-gl/dist/mapbox-gl.css";function b(){var o=n(c(p),2),r=o[0],b=o[1],g=n(c(f),2),x=g[0],w=g[1],j=m(v),k=m(h),z=l(null);return a((function(){var o,n,t,i,l,a;if(!r){"unavailable"===s()&&d("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",(function(o){o&&console.error(o)}),!0);var c=new u(e(e({},j),{container:z.current||"",style:null!==(o=null==j?void 0:j.style)&&void 0!==o?o:"https://map.ir/vector/styles/main/mapir-Dove-style.json",center:null!==(n=null==j?void 0:j.center)&&void 0!==n?n:[54.82,31.77],zoom:null!==(t=null==j?void 0:j.zoom)&&void 0!==t?t:5,pitch:null!==(i=null==j?void 0:j.pitch)&&void 0!==i?i:0,hash:null===(l=null==j?void 0:j.hash)||void 0===l||l,attributionControl:!0,customAttribution:"".concat(null!==(a=null==j?void 0:j.customAttribution)&&void 0!==a?a:""," © Map.ir © Openstreetmap"),transformRequest:function(o,r){return null==j?void 0:j.transformRequest(o,r)}}));c.on("load",(function(){c.resize(),w(!0)})),null==b||b(c)}}),[r,b]),a((function(){var o,n;if(r&&x&&k){var e=Object.keys(k.sources)[0],i=k.sources[Object.keys(k.sources)[0]],l=k.layers;r.getSource(e)||r.addSource(e,i);try{for(var a=t(l),s=a.next();!s.done;s=a.next()){var d=s.value;r.getLayer(d.id)||r.addLayer(d)}}catch(r){o={error:r}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}}}),[r,x,k]),i.createElement(y,null,i.createElement("div",{id:"style-editor-map",ref:z}))}var g,y=o.div.withConfig({displayName:"map__MapWrapper",componentId:"sc-1xj8oxu-0"})(g||(g=r(["\n  position: relative;\n  height: 100%;\n  /* flex-grow: 2.5; */\n  width: 70%;\n  overflow: hidden;\n  border-radius: var(--radius-16);\n\n  #style-editor-map {\n    width: 100%;\n    height: 100%;\n    background-color: #eff0f0;\n\n    /* @media (prefers-color-scheme: dark) {\n      background-color: #4a5768;\n    } */\n  }\n"],["\n  position: relative;\n  height: 100%;\n  /* flex-grow: 2.5; */\n  width: 70%;\n  overflow: hidden;\n  border-radius: var(--radius-16);\n\n  #style-editor-map {\n    width: 100%;\n    height: 100%;\n    background-color: #eff0f0;\n\n    /* @media (prefers-color-scheme: dark) {\n      background-color: #4a5768;\n    } */\n  }\n"])));export{b as default};
//# sourceMappingURL=map.js.map
